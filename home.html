<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="home.css">
    <title>Document</title>
</head>
<body>
<div id="light">
    <span>&#xf185;</span>
</div>
<ul id="couleur">
    <li style="background-color: rgb(155, 46, 222);"></li>
    <li style="background-color: rgb(40, 210, 51)"></li>
    <li style="background-color: rgb(45, 88, 241);"></li>
    <li style="background-color: rgb(204, 133, 76);"></li>
    <li style="background-color: rgb(243, 55, 55);"></li>
</ul>
<div id="navbar">
    <div id="show_hide"><i class="fas fa-arrow-up"></i></div>
    <div id="logo">
        <span id="nomm">Moussaif</span>
        <span id="pren">Abdelkabir</span>
    </div>
    <ul id="nav">
        <li><a href="loging.html"><div>logout</div></a></li>
    </ul>
</div>
<div id="container">
    <div id="hearth">
        <div id="heartl"></div>
        <div id="heartr"></div></div>
    <div id="arml"></div>
    <div id="armr"></div>
    <div id="head">
        <div id="eyel"><h3></h3></div>
        <div id="eyer"><h3></h3></div>
        <div id="lipsl"></div>
        <div id="lipsr"></div>
        <div id="mouthl"></div>
        <div id="mouthr"></div>
        <div id="nose"></div>
        <div id="earl"></div>
        <div id="earr"></div>
    </div>
    <form>
        <div class="nom">
            <input type="text" name="name" id="etudiant" placeholder="" required>
            <label for="nom">Identifiant</label></div>
        <div class="note">
            <input type="text" name="math" id="math"  placeholder="" required>
            <label for="prenom">Math</label></div>
        <div class="note">
            <input type="number" name="info" id="info"  placeholder="" required>
            <label for="prenom">Iformatique</label></div>
        <button type="button" id="submit">VALIDER</button>
    </form>
    <div id="legl"><div class="plat"><div class="A"></div><div class="B"></div><div class="C"></div></div></div>
    <div id="legr"><div class="plat"><div class="A"></div><div class="B"></div><div class="C"></div></div></div>
</div>
<script>
    document.documentElement.style.setProperty('--theme', localStorage.getItem('theme'));
    document.addEventListener('DOMContentLoaded', function() {
            var light = document.getElementById('light');
            var icon = light.querySelector('span');
            var navbar = document.getElementById('navbar');
            var show = document.getElementById('show_hide');
            var couleurs = document.querySelectorAll('#couleur li');
        document.documentElement.style.setProperty('--theme', localStorage.getItem('theme'));
            couleurs.forEach(element=>{
                element.addEventListener('click',function(){
                    document.documentElement.style.setProperty('--theme', element.style.backgroundColor);
                    localStorage.setItem('theme', element.style.backgroundColor);
                });
            });
            let savedIcon = localStorage.getItem('icon') || '\uf185';
            icon.textContent = savedIcon;
            toggleLight();
            function toggleLight() {
                localStorage.setItem('icon', icon.textContent);
                if (icon.textContent === '\uf185') {
                    light.style.transform = "rotate(360deg)";
                    icon.textContent = '\uf186';
                    document.documentElement.style.setProperty('--white', 'rgb(41, 40, 40)');
                    document.documentElement.style.setProperty('--black', 'white');
                } else {
                    light.style.transform = "rotate(0deg)";
                    icon.textContent = '\uf185';
                    document.documentElement.style.setProperty('--white', 'white');
                    document.documentElement.style.setProperty('--black', 'rgb(41, 40, 40)');
                }
            }
            light.addEventListener('click', toggleLight);
            show.addEventListener('click', function() {
                var x = 80;
                if (navbar.style.transform == 'translateY(-' + x + 'px)') {
                    navbar.style.transform = 'translateY(0px)';
                    show.innerHTML = '<i class="fas fa-arrow-up"></i>';
                } else {
                    navbar.style.transform = 'translateY(-' + x + 'px)';
                    show.innerHTML = '<i class="fas fa-arrow-down"></i>';
                }
            });
        var form = document.querySelector("form");
        var head = document.getElementById("head");
        var hearth=document.getElementById("hearth");
        var eyes =document.querySelectorAll("h3");
        var nom =document.getElementById("etudiant");
        var math = document.getElementById("math");
        var info = document.getElementById("info");
        var submit= document.getElementById("submit");
        var arml =document.getElementById("arml");
        var armr = document.getElementById("armr");
        var note = [math,info];
        arml.style.animation="salut 4s forwards";
        setTimeout(function() {
            arml.style.animation="salute 3s forwards";
        },3000);
        form.addEventListener("focusout",function(){
            eyes.forEach(element => {
                element.style.top="-9px";
                element.style.left="8px";
            });
        });
        note.forEach(element => {
            element.addEventListener("focusin", function () {
                arml.style.height = "80px";
                armr.style.height = "80px";
                arml.style.top = "10px";
                armr.style.top = "10px";
                arml.style.left = "40%";
                armr.style.right = "40%";
                arml.style.transform = "rotate(-135deg)";
                armr.style.transform = "rotate(135deg)";
            });
            element.addEventListener("blur", function () {
                arml.style.height = "30px";
                arml.style.top = "85px";
                arml.style.left = "20%";
                arml.style.transform = "rotate(0deg)";
                if (this.value >= 10) {
                    armr.style.height="80px";
                    armr.style.top="40px";
                    armr.style.right="38%";
                    armr.style.transform="rotate(100deg)";
                    setTimeout(function() {
                        hearth.style.display="block";
                        hearth.style.animation="biso 2s forwards";
                        armr.style.height="100px";
                        armr.style.transform="rotateY(-60deg) rotateZ(-20deg) rotate(100deg) ";
                    },1500);
                    setTimeout(function() {
                        armr.style.height = arml.style.height;
                        armr.style.top = arml.style.top;
                        armr.style.right = arml.style.left;
                        armr.style.transform = arml.style.transform.replace("-", "+");
                        hearth.style.display="none";
                    },2500);
                }else{
                    head.style.backgroundColor="red";
                    head.style.boxShadow="0px 0px 20px red";
                    armr.style.height = "30px";
                    armr.style.top = "85px";
                    armr.style.right = "20%";
                    armr.style.transform = "rotate(0deg)";
                    setTimeout(function() {
                        head.style.backgroundColor="white";
                        head.style.boxShadow="none";
                    },2000);
                }
            });
            element.addEventListener("input", function () {
                arml.style.transform = "rotate(-150deg)";
                arml.style.left = "35%";
                let validPattern = /^\d{0,2}(\.\d{0,3})?$/;

                if (!validPattern.test(this.value)) {
                    event.target.value = this.value.slice(0, -1);
                }
                if (this.value > 20)
                    this.value = 20;
            });
        });
        submit.addEventListener("click",function(){
            if(nom.value.length && math.value.length && info.value.length){
                    form.style.marginTop="0px";
                    form.style.height="100%";
                    form.style.zIndex="1000";
                    arml.style.top="-20px";
                    armr.style.top="-20px";
                setTimeout(function() {
                    window.location.href = "resultat.html";
                },2000);
            }
        });
        eyes.forEach(element => {
            nom.addEventListener("focusin",function(){
                element.style.top="-5px";
                element.style.left="0px";
            })
            math.addEventListener("focusin",function(){
                element.style.top="-5px";
                element.style.left="6px";
            })
            info.addEventListener("focusin",function(){
                element.style.top="-3px"
                element.style.left="6px";
            })
        });
    });
</script>
</body>
</html>